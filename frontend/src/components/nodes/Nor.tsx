import { Handle, Position } from "reactflow";

import { handleStyles } from "../../utils/handles";
import { useActiveNodes } from "../../utils/state";
import Toolbar from "../Toolbar";

const Nor = ({ id }: { id: string }) => {
  const activeNodes = useActiveNodes((state) => state.activeNodes);

  return (
    <Toolbar id={id}>
      <svg
        width="159"
        height="68"
        viewBox="0 0 159 68"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M43.6017 2.46924L88.0891 6.35799L107.222 22.6908L114.221 30.6238L124.371 27.435L128.299 35.4459L124.391 41.7846L114.26 37.0792L103.644 51.9342L81.0893 64.5338L42.9795 65.6226L51.6903 41.6679L51.0681 20.3575L43.6017 2.46924Z"
          fill={activeNodes.includes(id) ? "#F3E597" : "#EEEEEE"}
          style={{
            transition: "fill 0.3s ease",
          }}
        />
        <path
          d="M128.084 34.1564H155.038M47.2229 17.3103H3.4231M48.9075 51.0025H3.4231"
          stroke="#C0C0C0"
          strokeWidth="3.36922"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M35.5886 0.464172L38.9578 4.57041C38.9578 4.57041 48.4864 16.3628 48.4864 34.1564C48.4864 51.95 38.9578 63.7423 38.9578 63.7423L35.5886 67.8485H64.4902C68.5469 67.8485 77.4443 67.8898 87.443 63.7949C97.4417 59.7001 108.562 51.4244 117.24 35.3672L115.028 34.1564L117.24 32.9455C99.8828 0.827356 72.5032 0.464172 64.4902 0.464172H35.5886ZM45.4857 5.518H64.4902C72.3812 5.518 95.2964 5.29865 111.607 34.1564C103.576 48.3561 93.8824 55.5238 85.1267 59.1096C76.096 62.8081 68.5469 62.7947 64.4902 62.7947H45.5383C48.6946 57.5582 53.5402 47.5501 53.5402 34.1564C53.5402 20.7244 48.6405 10.74 45.4857 5.518Z"
          fill="#C0C0C0"
        />
        <path
          d="M128.084 34.1564C128.084 35.9435 127.374 37.6575 126.11 38.9212C124.847 40.1849 123.133 40.8948 121.346 40.8948C119.559 40.8948 117.845 40.1849 116.581 38.9212C115.317 37.6575 114.607 35.9435 114.607 34.1564C114.607 32.3693 115.317 30.6553 116.581 29.3916C117.845 28.1279 119.559 27.418 121.346 27.418C123.133 27.418 124.847 28.1279 126.11 29.3916C127.374 30.6553 128.084 32.3693 128.084 34.1564Z"
          stroke="#C0C0C0"
          strokeWidth="5.05383"
        />
        <rect
          x="0.053833"
          y="13.941"
          width="6.73844"
          height="6.73844"
          fill="#B2B2B2"
        />
        <rect
          x="0.053833"
          y="47.6332"
          width="6.73844"
          height="6.73844"
          fill="#B2B2B2"
        />
        <rect
          x="151.669"
          y="30.7871"
          width="6.73844"
          height="6.73844"
          fill="#B2B2B2"
        />
        <path
          d="M60.6661 41.0486V29.2564H62.3001L69.5103 38.9092L69.2407 39.0608C69.1958 38.78 69.1565 38.4768 69.1228 38.1511C69.0891 37.8142 69.0554 37.4604 69.0217 37.0898C68.9993 36.708 68.9768 36.3093 68.9543 35.8937C68.9431 35.467 68.9319 35.0234 68.9206 34.5629C68.9094 34.1024 68.9038 33.6251 68.9038 33.131V29.2564H70.7232V41.0486H69.0554L61.9632 31.7496L62.1485 31.5138C62.2047 32.1988 62.2496 32.7828 62.2833 33.2658C62.3282 33.7374 62.3619 34.1417 62.3844 34.4787C62.418 34.8044 62.4405 35.0739 62.4517 35.2873C62.463 35.4894 62.4686 35.6579 62.4686 35.7927C62.4798 35.9274 62.4854 36.0454 62.4854 36.1464V41.0486H60.6661ZM78.9604 41.2171C78.1293 41.2171 77.36 41.0655 76.6525 40.7623C75.9562 40.459 75.3441 40.0379 74.8162 39.4988C74.2996 38.9485 73.8953 38.3083 73.6033 37.5783C73.3226 36.8371 73.1822 36.0285 73.1822 35.1525C73.1822 34.2765 73.3226 33.4735 73.6033 32.7435C73.8953 32.0023 74.2996 31.3621 74.8162 30.8231C75.3441 30.2728 75.9562 29.846 76.6525 29.5428C77.36 29.2395 78.1293 29.0879 78.9604 29.0879C79.7915 29.0879 80.5551 29.2395 81.2515 29.5428C81.959 29.846 82.5711 30.2728 83.0877 30.8231C83.6155 31.3734 84.0198 32.0191 84.3006 32.7604C84.5926 33.4904 84.7386 34.2877 84.7386 35.1525C84.7386 36.0173 84.5926 36.8203 84.3006 37.5615C84.0198 38.2915 83.6155 38.9317 83.0877 39.482C82.5711 40.0323 81.959 40.459 81.2515 40.7623C80.5551 41.0655 79.7915 41.2171 78.9604 41.2171ZM78.9604 39.4483C79.5332 39.4483 80.0554 39.3416 80.5271 39.1282C81.01 38.9148 81.4255 38.6172 81.7737 38.2353C82.1218 37.8423 82.3914 37.3874 82.5823 36.8708C82.7844 36.343 82.8855 35.7702 82.8855 35.1525C82.8855 34.5348 82.7844 33.9677 82.5823 33.4511C82.3914 32.9232 82.1218 32.4684 81.7737 32.0865C81.4255 31.6934 81.01 31.3902 80.5271 31.1768C80.0554 30.9635 79.5332 30.8568 78.9604 30.8568C78.3876 30.8568 77.8598 30.9635 77.3769 31.1768C76.9052 31.3902 76.4896 31.6878 76.1302 32.0697C75.7821 32.4515 75.5126 32.9064 75.3216 33.4342C75.1307 33.9508 75.0352 34.5236 75.0352 35.1525C75.0352 35.7702 75.1307 36.343 75.3216 36.8708C75.5126 37.3987 75.7821 37.8535 76.1302 38.2353C76.4896 38.6172 76.9052 38.9148 77.3769 39.1282C77.8598 39.3416 78.3876 39.4483 78.9604 39.4483ZM87.2019 41.0486V29.2564H92.2221C92.8959 29.2564 93.5136 29.4248 94.0751 29.7618C94.6479 30.0875 95.1028 30.5367 95.4397 31.1095C95.7766 31.671 95.9451 32.3055 95.9451 33.0131C95.9451 33.6532 95.7766 34.2484 95.4397 34.7987C95.1028 35.3491 94.6535 35.7927 94.092 36.1296C93.5305 36.4553 92.9071 36.6181 92.2221 36.6181H89.0213V41.0486H87.2019ZM94.2099 41.0486L91.2113 35.7253L93.0812 35.3041L96.4168 41.0655L94.2099 41.0486ZM89.0213 34.8661H92.3905C92.7162 34.8661 93.0082 34.7875 93.2665 34.6303C93.5248 34.4618 93.727 34.2372 93.873 33.9564C94.019 33.6644 94.092 33.3444 94.092 32.9962C94.092 32.6031 93.9965 32.2606 93.8056 31.9686C93.6259 31.6654 93.3676 31.4295 93.0307 31.2611C92.705 31.0926 92.3344 31.0084 91.9188 31.0084H89.0213V34.8661Z"
          fill="#C0C0C0"
        />
      </svg>

      <Handle
        type="target"
        position={Position.Left}
        style={{
          left: -6,
          top: 17,
          ...handleStyles,
        }}
        id="nor_in_1"
      />
      <Handle
        type="target"
        position={Position.Left}
        style={{
          left: -6,
          top: 50.5,
          ...handleStyles,
        }}
        id="nor_in_2"
      />
      <Handle
        type="source"
        position={Position.Right}
        style={{
          top: 33.5,
          right: -6,
          ...handleStyles,
        }}
        id="nor_out_1"
      />
    </Toolbar>
  );
};

export default Nor;
